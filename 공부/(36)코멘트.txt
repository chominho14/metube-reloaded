

Comments

지금까지 했던 것들을 모두 활용해서 만든다.

comment models

Schemas 정의

https://mongoosejs.com/docs/guide.html

1.
스키마 만들기 - 모델에 Comment.js를 만들어 작업한다.

import mongoose from "mongoose";

const commentSchema = new mongoose.Schema({
  text: { type: String.toString, required: true },
  owner: { type: mongoose.Schema.Types.ObjectId, required: true, ref: "User" },
  video: { type: mongoose.Schema.Types.ObjectId, required: true, ref: "Video" },
  createdAt: { type: Date, required: true, default: Date.now },
});

const Comment = mongoose.model("Comment", commentSchema);

export default Comment;


2.
User.js와 Video.js에 
  comments: [{ types: mongoose.Schema.Types.ObjectId, ref: "Comment" }],

comments: [
    { type: mongoose.Schema.Types.ObjectId, required: true, ref: "Comment" },
  ],

를 추가해 주기.


3.
init.js에 import하기

4.
js폴더 안에 
commentSection.js를 만들어 작업한다.
-> 웹팩에 넣어 웹팩한테 이 파일이 존재하는 지에 대해 알려준다.


5. commentSection를 사용할 템플릿에서 불러와 사용한다.
-> watch.pug에서.

    div.video__comments
        form.video__comment-form#commentForm 
            textarea(cols="30", rows="10", placeholder="Write a nice comment...")
            button Add Comment


6. 이제 자바스크립트 작업을 해준다.
-> element를 다루자.
--> commentSection.js에서






































